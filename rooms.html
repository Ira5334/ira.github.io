<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Номери та ціни - Готель "Горизонт"</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

<header>
    <h1>Готель "Горизонт"</h1>
    <nav>
        <ul>
                <li><a href="index.html">Головна</a></li>
                <li><a href="rooms.html">Номери</a></li>
                <li><a href="services.html">Послуги</a></li>
                <li><a href="promotions.html">Акції та події</a></li>
                <li><a href="contact.html">Контакти</a></li>
        </ul>
    </nav>
</header>

<main>
    <section id="rooms">
        <h2>Наші номери та ціни</h2>
        <p>У готелі "Горизонт" ми пропонуємо вам комфортні номери для будь-якого типу відпочинку. Ознайомтесь з нашим асортиментом номерів та цінами.</p>
        <p>Оберіть дати, щоб перевірити доступність номерів у готелі "Горизонт".</p>

        <!-- ФОРМА ПЕРЕВІРКИ ДОСТУПНОСТІ -->
        <form id="availability-form">
            <label for="check_in">Дата заїзду:</label>
            <input type="date" id="check_in" name="check_in" required>

            <label for="check_out">Дата виїзду:</label>
            <input type="date" id="check_out" name="check_out" required>

            <button type="submit">Перевірити доступність</button>
        </form>
        
 <div id="room-list"></div>
        
        <hr>
        
        <div class="room" data-room-id="ekonom">
            <img src="https://karpatykruiz.com.ua/assets/cache/images/shidnytsia/complexes/osonnia/Osonnya_ekonom_305_02-740x620.jpg" alt="Номер Економ">
            <img src="https://karpatykruiz.com.ua/assets/cache/images/shidnytsia/complexes/osonnia/Osonnya_ekonom_305_04-740x620.jpg" alt="Номер Економ 2">
            <h3>Номер Економ</h3>
             <p class="availability-status"></p>
            <p>
                Однокімнатний номер площею 16 м² на 2, 3 та 4 поверсі. Додаткове місце не передбачене. Загальна кількість номерів – 9 (№205, №209, №210, №305, №309, №310, №405, №409, №410). У кожному номері є балкон зі столиком та стільцями.
            </p>
            <p><strong>У номері:</strong> двоспальне ліжко, телевізор, чайник, холодильник, посуд, санвузол - душова кабіна, умивальник, фен, сушка для рушників, халат, тапочки, набір косметики.</p>
            <a href="booking.html?room_type=ekonom&price=800" class="book-button">Забронювати</a>
        </div>

        <div class="room" data-room-id="standart">
            <h3>Стандарт-номер</h3>
            <p class="availability-status"></p>
            <img src="https://karpatykruiz.com.ua/assets/cache/images/shidnytsia/complexes/osonnia/Osonnya_standart-v-SPA-k_307_02-740x620.jpg" alt="Стандарт-номер">
            <img src="https://karpatykruiz.com.ua/assets/cache/images/shidnytsia/complexes/osonnia/Osonnya_standart-v-SPA-k_307_03-740x620.jpg" alt="Стандарт-номер1"> 
            <p>Однокімнатний номер площею 20 м² на 2,3 та 4 поверсі. Можливе надання додаткового місця. Загальна кількість номерів – 6 (№204, №207, №304, №307, №404, №407). У кожному номері є балкон зі столиком та стільцями.</p>
            <p><strong>Ціна: 1200 грн/ніч</strong></p>
           <a href="booking.html?room_type=standart&price=1200" class="book-button">Забронювати</a>
        </div>

        <div class="room" data-room-id="lux">
            <h3>Люкс</h3>
            <p class="availability-status"></p>
            <img src="https://karpatykruiz.com.ua/assets/cache/images/shidnytsia/complexes/osonnia/Osonnya_lux-panor-v-SPA-k_501_01-740x620.jpg" alt="Люкс">
            <img src="https://karpatykruiz.com.ua/assets/cache/images/shidnytsia/complexes/osonnia/Osonnya_lux-panor-v-SPA-k_501_02-740x620.jpg" alt="Люкс1">
            <p>Трикімнатний номер площею 50 м² на 5 поверсі з видом на річку, гори, озеро та ліс. Складається з двох окремих спалень та вітальні. У номері є балкон зі столиком та стільцями.</p>
            <p><strong>Ціна: 2500 грн/ніч</strong></p>
           <a href="booking.html?room_type=lux&price=2500" class="book-button">Забронювати</a>
        </div>

        <div class="room" data-room-id="simeynyy">
            <h3>Сімейний номер</h3>
            <p class="availability-status"></p>
            <img src="https://karpatykruiz.com.ua/assets/cache/images/shidnytsia/complexes/osonnia/Osonnya_kotedz_2%2B3_4001_02-740x620.jpg" alt="Сімейний номер">
            <img src="https://karpatykruiz.com.ua/assets/cache/images/shidnytsia/complexes/osonnia/Osonnya_kotedz_2%2B3_4001_03-740x620.jpg" alt="Сімейний номер1">
            <p>Номер для всієї родини з двома спальнями та простором для відпочинку дітей і дорослих. У номері: двоспальне ліжко, розкладний двоспальний диван, односпальне крісло розкладне, шафа, міні-кухня: чайник, мікрохвильова піч, холодильник, посуд; санвузол – душова кабіна, умивальник, фен, сушка для рушників, халат, тапочки, набір косметики.</p>
            <p><strong>Ціна: 2000 грн/ніч</strong></p>
           <a href="booking.html?room_type=simeynyy&price=2000" class="book-button">Забронювати</a>
        </div>

        <div class="room" data-room-id="apartaments">
            <h3>Апартаменти</h3>
            <p class="availability-status"></p>
            <img src="https://karpatykruiz.com.ua/assets/cache/images/shidnytsia/complexes/osonnia/Osonnya_apart_lux_5005_02-740x620.jpg" alt="Апартаменти">
            <img src="https://karpatykruiz.com.ua/assets/cache/images/shidnytsia/complexes/osonnia/Osonnya_apart_lux_5005_03-740x620.jpg" alt="Апартаменти1">
            <p>Двокімнатний номер з міні-кухнею площею 50 м² розташований у котеджному будиночку, збудованому повністю з натурального дерева. Є можливість розміщення на додатковому місці. Загальна кількість номерів – 3 (№117 – на 4 поверсі, №5005 та №5007 на 2 поверсі).</p>
            <p><strong>Ціна: 3500 грн/ніч</strong></p>
           <a href="booking.html?room_type=apartaments&price=3500" class="book-button">Забронювати</a>
        </div>
    </section>
</main>

<footer>
    <p>&copy; 2025 Готель "Горизонт". Усі права захищені.</p>
    <a href="index.html">Головна</a>
     <a href="gallery.html">Фотогалерея</a>
    <a href="reviews.html">Відгуки</a>
    <a href="contact.html">Контакти</a>
</footer>

    <script>
    async function fetchRoomData() {
        const response = await fetch('check_availability.json');
        const data = await response.json();
        return data;
    }

    function isRoomAvailable(room, checkInDate, checkOutDate, reservations) {
        return !reservations.some(reservation => {
            const resCheckInDate = new Date(reservation.check_in_date);
            const resCheckOutDate = new Date(reservation.check_out_date);

            // Перевірка перетину дат
            return (checkInDate < resCheckOutDate && checkOutDate > resCheckInDate && reservation.room_id === room.room_id);
        });
    }

    async function checkRoomAvailability(event) {
        event.preventDefault();

        const checkInDate = new Date(document.getElementById('check_in').value);
        const checkOutDate = new Date(document.getElementById('check_out').value);

        if (!checkInDate || !checkOutDate) {
            alert("Будь ласка, виберіть дати заїзду та виїзду!");
            return;
        }

        const data = await fetchRoomData();
        const rooms = data.rooms;
        const reservations = data.reservations;

        // Оновлення статусу доступності для кожного номера
        rooms.forEach(room => {
            const roomElement = document.querySelector(`.room[data-room-id="${room.room_id}"]`);
            const availabilityStatus = roomElement.querySelector('.availability-status');
            if (isRoomAvailable(room, checkInDate, checkOutDate, reservations)) {
                availabilityStatus.textContent = 'Доступний';
                availabilityStatus.style.color = 'green';
            } else {
                availabilityStatus.textContent = 'Зайнятий';
                availabilityStatus.style.color = 'red';
            }
        });
    }

    // Додавання обробника події для форми
    document.getElementById('availability-form').addEventListener('submit', checkRoomAvailability);
</script>
    
</body>
</html>
